<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- changed: make responsive on mobile -->
  <title>Moto App - Motorsport Exclusive</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <style>
:root{
  --bg1:#0f1724;
  --bg2:#1b2340;
  --card: rgba(255,255,255,0.04);
  --accent:#4ade80;
  --accent-2:#7c3aed;
  --text:#e6eef8;
  --muted:rgba(230,238,248,0.6);
  --glass: rgba(255,255,255,0.03);
  --max-width:420px;
}

/* base */
html,body{ height:100%; }
body{
  font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
  background:
    radial-gradient(800px 400px at 10% 20%, rgba(124,58,237,0.12), transparent 10%),
    radial-gradient(600px 300px at 90% 80%, rgba(74,222,128,0.06), transparent 8%),
    linear-gradient(180deg, var(--bg1), var(--bg2));
  color:var(--text);
  margin:0;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:auto; /* changed: allow scrolling on small viewports */
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding:24px; /* small page padding for devices */
  box-sizing:border-box;
}

/* container */
.container{
  width:100%;
  max-width:var(--max-width);
  padding: clamp(16px, 4vw, 28px); /* changed: responsive padding */
  border-radius:16px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  box-shadow: 0 10px 30px rgba(2,6,23,0.7), inset 0 1px 0 rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  position:relative;
  overflow:visible;
  backdrop-filter: blur(8px) saturate(120%);
  display:flex;                    /* changed: keep internal layout stable */
  flex-direction:column;           /* changed: column layout */
  align-items:stretch;             /* changed: full-width children */
  gap:10px;                        /* changed: spacing between header/toggle/forms */
}

/* softer decorative stripe on very small screens */
.container::before{
  content:'';
  position:absolute;
  left:-20%;                      /* changed: reduce overflow that can shift centering */
  top:-30%;
  width:140%;
  height:50%;
  transform:rotate(-12deg);
  background: linear-gradient(90deg, rgba(124,58,237,0.08), rgba(74,222,128,0.06));
  pointer-events:none;
  opacity:0.9;
}

/* new wrapper to stabilize height so layout doesn't jump when switching forms */
.forms-wrapper{
  min-height:280px;               /* keep container height consistent */
  display:flex;
  flex-direction:column;
  justify-content:center;
  gap:8px;
  width:100%;
}

/* ensure forms take full width and animate smoothly */
#loginForm, #signupForm{
  width:100%;
  transition:opacity 160ms ease, transform 160ms ease;
}

/* typography */
h2{
  margin:0 0 14px 0;
  color:var(--accent-2);
  text-transform:uppercase;
  letter-spacing:1px;
  font-size:1.05rem;
}

/* toggle */
.form-toggle{ display:flex; gap:8px; margin-bottom:6px; }
.form-toggle button{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.04);
  background:transparent;
  color:var(--muted);
  cursor:pointer;
  font-weight:600;
  font-size:0.95rem;
  text-align:center;               /* ensure centered label */
  min-height:44px;                /* consistent touch target */
}
.form-toggle button.active{
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  color:#071020;
  box-shadow: 0 6px 18px rgba(124,58,237,0.12), 0 2px 6px rgba(74,222,128,0.06);
}

/* inputs & buttons: touch-friendly */
input{
  width:100%;
  padding:14px 14px; /* increased for touch */
  margin:8px 0;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.06);
  background:var(--glass);
  color:var(--text);
  outline:none;
  font-size:1rem;
  min-height:44px;
  box-sizing:border-box;
}
input::placeholder{ color:var(--muted); opacity:0.95; }

button{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:10px;
  border:none;
  cursor:pointer;
  font-weight:700;
  color:#071020;
  background:linear-gradient(90deg,var(--accent),var(--accent-2));
  min-height:48px; /* touch target */
  font-size:1rem;
}

/* Google button */
.google-btn{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  background:linear-gradient(90deg,#ffffff, #f1f5f9);
  color:#0b1220;
  padding:10px;
  border-radius:10px;
  min-height:48px;
}
.google-btn img{ width:20px; height:20px; display:block; }

/* links */
.forgot-password{ display:block; margin-top:8px; color:var(--muted); text-decoration:none; font-size:0.95rem; cursor:pointer; }
.forgot-password:hover{ color:var(--accent); }

/* focus-visible for keyboard users */
input:focus, .form-toggle button:focus, button:focus, .google-btn:focus{
  outline:3px solid rgba(124,58,237,0.14);
  outline-offset:2px;
  border-color:rgba(124,58,237,0.22);
  box-shadow:0 6px 18px rgba(124,58,237,0.06);
}

/* layout tweaks for small screens */
@media (max-width:420px){
  :root{ --max-width: 380px; }
  .container{ padding:18px; border-radius:12px; }
  h2{ font-size:1rem; }
  input{ padding:12px; font-size:0.98rem; }
  button{ padding:10px; font-size:0.98rem; }
  .container::before{ top:-50%; height:55%; left:-30%; transform:rotate(-16deg); opacity:0.6; }
  .forms-wrapper{ min-height:240px; }
}

/* very small phones in portrait */
@media (max-width:360px){
  :root{ --max-width: 340px; }
  .form-toggle button{ font-size:0.92rem; padding:9px; }
  h2{ margin-bottom:12px; }
  .forms-wrapper{ min-height:220px; }
}

/* landscape / limited-height adjustments */
@media (max-height:500px){
  body{ align-items:flex-start; padding-top:18px; padding-bottom:18px; }
  .container{ transform: translateY(6px); }
}
  </style>
</head>
<body>
<div class="container" role="form" aria-labelledby="appTitle">
  <h2 id="appTitle">Moto App</h2>
  <div class="form-toggle" role="tablist" aria-label="Auth toggle">
    <button onclick="showLogin()" class="active" role="tab" aria-selected="true">Login</button>
    <button onclick="showSignup()" role="tab" aria-selected="false">Signup</button>
  </div>

  <!-- added wrapper so switching forms doesn't reflow/shift the whole container -->
  <div class="forms-wrapper">
  <div id="loginForm" aria-hidden="false">
    <input id="loginEmail" type="email" placeholder="Email" inputmode="email" autocomplete="email" aria-label="Email">
    <input id="loginPassword" type="password" placeholder="Password" autocomplete="current-password" aria-label="Password">
    <button onclick="login()" aria-label="Login">Login</button>
    <a class="forgot-password" onclick="forgotPassword()" role="button" aria-label="Forgot password">Forgot Password?</a>
    <button class="google-btn" onclick="googleSignIn()" aria-label="Login with Google">
      <img src="https://img.icons8.com/color/16/000000/google-logo.png" alt="Google logo"> Login with Google
    </button>
  </div>

  <div id="signupForm" style="display:none;" aria-hidden="true">
    <input id="signupEmail" type="email" placeholder="Email" inputmode="email" autocomplete="email" aria-label="Signup email">
    <input id="signupPassword" type="password" placeholder="Password" autocomplete="new-password" aria-label="Signup password">
    <button onclick="signup()" aria-label="Signup">Signup</button>
    <button class="google-btn" onclick="googleSignIn()" aria-label="Signup with Google">
      <img src="https://img.icons8.com/color/16/000000/google-logo.png" alt="Google logo"> Signup with Google
    </button>
  </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { 
  getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword,
  GoogleAuthProvider, signInWithPopup, sendPasswordResetEmail 
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyCR1RiCfqPUJHOqByJTfK2c4rz96cGrzjw",
  authDomain: "motoprototype1.firebaseapp.com",
  projectId: "motoprototype1",
  storageBucket: "motoprototype1.firebasestorage.app",
  messagingSenderId: "165891636705",
  appId: "1:165891636705:web:d680c9b05ec22911bd66a0"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

gsap.from(".container", { duration: 1, opacity: 0, scale: 0.98, y: 20, ease: "power3.out" });

function showLogin() {
  document.getElementById("signupForm").style.display = "none";
  document.getElementById("loginForm").style.display = "block";
  document.getElementById("signupForm").setAttribute("aria-hidden","true");
  document.getElementById("loginForm").setAttribute("aria-hidden","false");
  const btns = document.querySelectorAll(".form-toggle button");
  btns[0].classList.add("active");
  btns[0].setAttribute("aria-selected","true");
  btns[1].classList.remove("active");
  btns[1].setAttribute("aria-selected","false");
}
function showSignup() {
  document.getElementById("loginForm").style.display = "none";
  document.getElementById("signupForm").style.display = "block";
  document.getElementById("loginForm").setAttribute("aria-hidden","true");
  document.getElementById("signupForm").setAttribute("aria-hidden","false");
  const btns = document.querySelectorAll(".form-toggle button");
  btns[1].classList.add("active");
  btns[1].setAttribute("aria-selected","true");
  btns[0].classList.remove("active");
  btns[0].setAttribute("aria-selected","false");
}

async function login(){
  const email=document.getElementById("loginEmail").value;
  const password=document.getElementById("loginPassword").value;
  try{
    const userCred=await signInWithEmailAndPassword(auth,email,password);
    localStorage.setItem("uid",userCred.user.uid);
    // use relative navigation friendly for local/dev hosting
    window.location.href="profile.html";
  }catch(e){ alert("Login failed: "+e.message);}
}

async function signup(){
  const email=document.getElementById("signupEmail").value;
  const password=document.getElementById("signupPassword").value;
  try{
    const userCred=await createUserWithEmailAndPassword(auth,email,password);
    localStorage.setItem("uid",userCred.user.uid);
    window.location.href="profile.html";
  }catch(e){ alert("Signup failed: "+e.message);}
}

async function googleSignIn(){
  try{
    const result=await signInWithPopup(auth,provider);
    const user=result.user;
    localStorage.setItem("uid",user.uid);
    localStorage.setItem("displayName",user.displayName||"");
    localStorage.setItem("email",user.email);
    localStorage.setItem("photoURL",user.photoURL||"");
    window.location.href="profile.html";
  }catch(e){ alert("Google login failed: "+e.message);}
}

async function forgotPassword(){
  const email=document.getElementById("loginEmail").value;
  if(!email) return alert("Enter your email");
  try{ await sendPasswordResetEmail(auth,email); alert("Password reset sent!"); }
  catch(e){ alert("Failed: "+e.message);}
}

window.showLogin=showLogin;
window.showSignup=showSignup;
window.login=login;
window.signup=signup;
window.googleSignIn=googleSignIn;
window.forgotPassword=forgotPassword;

// Initialize default form state
showLogin();
</script>
</body>
</html>
