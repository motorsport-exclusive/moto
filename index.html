<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Motorsport Exclusive</title>
    <link rel="stylesheet" href="index.css">
    <script defer src="index.js"></script>
</head>
<body>
<header class="main-header">
  <div class="brand">Motorsport Exclusive</div>
  <button id="menuToggle" class="menu-toggle" aria-expanded="false" aria-controls="mainNav">☰</button>

  <nav id="mainNav" class="main-nav" role="navigation">
    <button class="nav active" data-cat="formula1">Formula 1</button>
    <button class="nav" data-cat="motogp">MotoGP</button>
    <button class="nav" data-cat="wrc">WRC</button>
    <button class="nav" data-cat="indylights">Indy</button><br>
    <button id="accountBtn" class="nav">Account</button>
  </nav>
</header>

<main class="content">
  <iframe id="latestFrame" src="latest/latest.html" title="Latest content" frameborder="0" sandbox="allow-same-origin allow-scripts allow-popups"></iframe>
</main>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCR1RiCfqPUJHOqByJTfK2c4rz96cGrzjw",
    authDomain: "motoprototype1.firebaseapp.com",
    projectId: "motoprototype1",
    storageBucket: "motoprototype1.firebasestorage.app",
    messagingSenderId: "165891636705",
    appId: "1:165891636705:web:d680c9b05ec22911bd66a0"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const accountBtn = document.getElementById("accountBtn");
  if (accountBtn) {
    accountBtn.addEventListener("click", () => {
      const user = auth.currentUser || localStorage.getItem("uid");
      if (user) window.location.href = "/auth/profile.html"; // ✅ updated redirect
      else window.location.href = "/auth/auth.html";
    });
  }
</script>
</body>
</html>
